<!doctype html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Twitter and CartoDB &mdash; 2013 NBA Playoffs</title>
  <meta name="viewport" content="width=device-width">
  <meta name="robots">

  <!-- Hello metas -->
  <meta name="keywords" content="twitter, nba, san antonio, miami, cartodb, visualization, data, map, torque, big data">
  <meta name="description" content="Twitter and CartoDB &mdash; 2013 NBA Playoffs">
  <link rel="shortcut icon" href="http://cartodb.com/assets/favicon.ico" />
  <meta name="author" content="CartoDB.com">
  <meta name="DC.title" content="">
  <meta property="og:title" content="Twitter and CartoDB &mdash; 2013 NBA Playoffs">
  <meta property="og:description" content="Amount of tweets during Playoff Finals"> 
  <meta property="og:type" content="Visualization">
  <meta property="og:url" content="http://vizzuality.github.io/tweets_nba/">
  <meta property="og:image" content="">

    <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.css" />
    <!--[if lte IE 8]>
      <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.ie.css" />
    <![endif]-->
  <link rel="stylesheet" href="styles/main.css">

  <script src="scripts/vendor/modernizr.js"></script>
  <script src="http://libs.cartocdn.com/cartodb.js/v3/cartodb.js"></script>
</head>
<body>
  <!-- Header -->
  <header class="header map_header clearfix">
    <a href="http://cartodb.com/" class="logo"></a>

    <h1 class="title">2013 NBA Playoffs</h1>
    <p class="subtitle">Amount of tweets during Playoff Finals</p>
  </header>

  <!-- Switch -->
  <nav id="switch" class="switch">
    <ul class="menu">
      <li class="selected"><a href="#" id="static">Static</a></li><li><a href="#" id="dynamic">Dynamic</a></li>
    </ul>
  </nav>

  <!-- Slider -->
  <div id="slider_wrapper" class="slider_wrapper">
    <div id="slider" class="slider"></div>
    <p id="hour" class="hour">0:00<br /><span>14/6/2013</span></p>
  </div>

  <!-- Map -->
  <div id="map" class="map"></div>

  <!-- Google Analytics -->
  <script>
    var _gaq=[['_setAccount','UA-20934186-3'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src='https://www.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>

  <script type="text/javascript">
    window.AppData = window.AppData || {};
    window.AppData.START_DATE = 1371160800-3600; // one hour before
    window.AppData.END_DATE = 1371938174;
    window.AppData.DYNAMIC_MAP = {
      user:'osm2',
      table:'mtvhottest_cleaned',
      column:'timestamp',
      steps: 1250,
      step: 15*60,
      resolution:1,
      countby:'sum(i.retweets + 1)'
      // cdn_url: "0.tiles.cartocdn.com"
    };
  </script>

  <script src="scripts/vendor/jquery-ui-1.10.2.custom.js"></script>
  <script src="scripts/leaflet_tileloader_mixin.js"></script>
  <script src="scripts/canvas_layer.js"></script>
  <script src="scripts/time_layer.js"></script>

  <script src="scripts/events.js"></script>
  <script src="scripts/slider.js"></script>
  <script src="scripts/switch.js"></script>
  <script src="scripts/map.js"></script>
  <script src="scripts/app.js"></script>

  <script type="text/javascript">


    window.AppData.ANIMATION_SCALE = 10;
    window.AppData.STATIC_MAP = 'http://osm2.cartodb.com/api/v2/viz/271acd62-0103-11e3-a6ca-6805ca04cef1/viz.json';
    window.AppData.BALLS_COLOR = 'rgba(238, 45, 45, .50)';
    window.AppData.BALL_SIZE_GAIN = 1;
    window.AppData.BALL_ANIMATION_SPEED = 8;
    
      var dragged = false,
         clicked = false,
         stopped = true,
         valueStart = 0;
      var hash = location.hash.split("#").pop();


      var sql = new cartodb.SQL({ user: 'javi' });
          sql.execute("SELECT max(date_part('epoch', timestamp))::int as end_date, min(date_part('epoch', timestamp))::int -3600 as start_date FROM game7_tweets")
      .done(function(data) {
        console.log(data)
      })

      if(hash.length === 0) {
        App.initialize();
      } else if(hash.split("/")[0] === "dynamic") {
        App.initialize({mode: "dynamic"});
      } else if(hash.split("/")[0] === "static") {
        App.initialize();
      }
  </script>
</body>
</html>